(this["webpackJsonpphase-4-rails-api-code-challenge-superheroes-client"]=this["webpackJsonpphase-4-rails-api-code-challenge-superheroes-client"]||[]).push([[0],{21:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(15),s=n.n(c),o=(n(21),n(2)),i=n(5),j=n(0);var a=function(){return Object(j.jsx)("header",{children:Object(j.jsx)("h1",{children:Object(j.jsx)(i.b,{to:"/",children:"Super Heroes"})})})},d=n(4);var u=function(){var e=Object(r.useState)({data:null,error:null,status:"pending"}),t=Object(d.a)(e,2),n=t[0],c=n.data,s=n.error,a=n.status,u=t[1],h=Object(o.g)().id;return Object(r.useEffect)((function(){fetch("/heroes/".concat(h)).then((function(e){e.ok?e.json().then((function(e){return u({data:e,error:null,status:"resolved"})})):e.json().then((function(e){return u({data:null,error:e.error,status:"rejected"})}))}))}),[h]),"pending"===a?Object(j.jsx)("h1",{children:"Loading..."}):"rejected"===a?Object(j.jsxs)("h1",{children:["Error: ",s.error]}):Object(j.jsxs)("section",{children:[Object(j.jsx)("h2",{children:c.super_name}),Object(j.jsxs)("h3",{children:["AKA ",c.name]}),Object(j.jsx)("h3",{children:"Powers:"}),Object(j.jsx)("ul",{children:c.powers.map((function(e){return Object(j.jsx)("li",{children:Object(j.jsx)(i.b,{to:"/powers/".concat(e.id),children:e.name})},e.id)}))}),Object(j.jsx)(i.b,{to:"/hero_powers/new",children:"Add Hero Power"})]})};var h=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){fetch("/heroes").then((function(e){return e.json()})).then(c)}),[]),Object(j.jsxs)("section",{children:[Object(j.jsx)("h2",{children:"All Heroes"}),Object(j.jsx)("ul",{children:n.map((function(e){return Object(j.jsx)("li",{children:Object(j.jsx)(i.b,{to:"/heroes/".concat(e.id),children:e.super_name})},e.id)}))})]})};var l=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)([]),i=Object(d.a)(s,2),a=i[0],u=i[1],h=Object(r.useState)(""),l=Object(d.a)(h,2),b=l[0],O=l[1],p=Object(r.useState)(""),f=Object(d.a)(p,2),x=f[0],g=f[1],m=Object(r.useState)(""),v=Object(d.a)(m,2),w=v[0],S=v[1],_=Object(r.useState)([]),y=Object(d.a)(_,2),E=y[0],P=y[1],k=Object(o.f)();return Object(r.useEffect)((function(){fetch("/heroes").then((function(e){return e.json()})).then(c)}),[]),Object(r.useEffect)((function(){fetch("/powers").then((function(e){return e.json()})).then(u)}),[]),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={hero_id:b,power_id:x,strength:w};fetch("/hero_powers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){e.ok?k.push("/heroes/".concat(b)):e.json().then((function(e){return P(e.errors)}))}))},children:[Object(j.jsx)("label",{htmlFor:"power_id",children:"Power:"}),Object(j.jsxs)("select",{id:"power_id",name:"power_id",value:x,onChange:function(e){return g(e.target.value)},children:[Object(j.jsx)("option",{value:"",children:"Select a power"}),a.map((function(e){return Object(j.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(j.jsx)("label",{htmlFor:"hero_id",children:"Hero:"}),Object(j.jsxs)("select",{id:"hero_id",name:"hero_id",value:b,onChange:function(e){return O(e.target.value)},children:[Object(j.jsx)("option",{value:"",children:"Select a hero"}),n.map((function(e){return Object(j.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(j.jsx)("label",{htmlFor:"strength",children:"Strength:"}),Object(j.jsx)("input",{type:"text",id:"strength",name:"strength",value:w,onChange:function(e){return S(e.target.value)}}),E.length>0?E.map((function(e){return Object(j.jsx)("p",{style:{color:"red"},children:e},e)})):null,Object(j.jsx)("button",{type:"submit",children:"Add Hero Power"})]})};var b=function(){var e=Object(r.useState)({data:null,error:null,status:"pending"}),t=Object(d.a)(e,2),n=t[0],c=n.data,s=n.error,a=n.status,u=t[1],h=Object(o.g)().id;return Object(r.useEffect)((function(){fetch("/powers/".concat(h)).then((function(e){e.ok?e.json().then((function(e){return u({data:e,error:null,status:"resolved"})})):e.json().then((function(e){return u({data:null,error:e.error,status:"rejected"})}))}))}),[h]),"pending"===a?Object(j.jsx)("h1",{children:"Loading..."}):"rejected"===a?Object(j.jsxs)("h1",{children:["Error: ",s.error]}):Object(j.jsxs)("section",{children:[Object(j.jsx)("h2",{children:c.name}),Object(j.jsx)("p",{children:c.description}),Object(j.jsx)("p",{children:Object(j.jsx)(i.b,{to:"/hero_powers/new",children:"Add Hero Power"})}),Object(j.jsx)("p",{children:Object(j.jsx)(i.b,{to:"/powers/".concat(c.id,"/edit"),children:"Edit Power Description"})})]})};var O=function(){var e=Object(r.useState)({data:null,errors:[],status:"pending"}),t=Object(d.a)(e,2),n=t[0],c=n.data,s=n.errors,i=n.status,a=t[1],u=Object(r.useState)(""),h=Object(d.a)(u,2),l=h[0],b=h[1],O=Object(o.f)(),p=Object(o.g)().id;return Object(r.useEffect)((function(){fetch("/powers/".concat(p)).then((function(e){e.ok?e.json().then((function(e){a({data:e,errors:[],status:"resolved"}),b(e.description)})):e.json().then((function(e){return a({data:null,errors:[e.error],status:"rejected"})}))}))}),[p]),"pending"===i?Object(j.jsx)("h1",{children:"Loading..."}):Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/powers/".concat(c.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:l})}).then((function(e){e.ok?O.push("/powers/".concat(c.id)):e.json().then((function(e){return a({data:c,errors:e.errors,status:"rejected"})}))}))},children:[Object(j.jsxs)("h2",{children:["Editing ",c.name]}),Object(j.jsx)("label",{htmlFor:"description",children:"Description:"}),Object(j.jsx)("textarea",{id:"description",name:"description",rows:"4",value:l,onChange:function(e){return b(e.target.value)}}),s.length>0?s.map((function(e){return Object(j.jsx)("p",{style:{color:"red"},children:e},e)})):null,Object(j.jsx)("button",{type:"submit",children:"Update Power"})]})};var p=function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)(a,{}),Object(j.jsx)("main",{children:Object(j.jsxs)(o.c,{children:[Object(j.jsx)(o.a,{exact:!0,path:"/hero_powers/new",children:Object(j.jsx)(l,{})}),Object(j.jsx)(o.a,{exact:!0,path:"/powers/:id/edit",children:Object(j.jsx)(O,{})}),Object(j.jsx)(o.a,{exact:!0,path:"/powers/:id",children:Object(j.jsx)(b,{})}),Object(j.jsx)(o.a,{exact:!0,path:"/heroes/:id",children:Object(j.jsx)(u,{})}),Object(j.jsx)(o.a,{exact:!0,path:"/",children:Object(j.jsx)(h,{})})]})})]})};s.a.render(Object(j.jsx)(i.a,{children:Object(j.jsx)(p,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.bfc102f8.chunk.js.map