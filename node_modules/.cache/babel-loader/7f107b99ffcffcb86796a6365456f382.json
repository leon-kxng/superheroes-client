{"ast":null,"code":"import _slicedToArray from\"/home/lee/Dev/school/python-code-challenge-superheroes/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function HeroPowerForm(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),heroes=_useState2[0],setHeroes=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),powers=_useState4[0],setPowers=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),heroId=_useState6[0],setHeroId=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),powerId=_useState8[0],setPowerId=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),strength=_useState10[0],setStrength=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),formErrors=_useState12[0],setFormErrors=_useState12[1];var history=useHistory();useEffect(function(){fetch(\"/heroes\").then(function(r){return r.json();}).then(setHeroes);},[]);useEffect(function(){fetch(\"/powers\").then(function(r){return r.json();}).then(setPowers);},[]);function handleSubmit(e){e.preventDefault();var formData={hero_id:heroId,power_id:powerId,strength:strength};fetch(\"/hero_powers\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(formData)}).then(function(r){if(r.ok){history.push(\"/heroes/\".concat(heroId));}else{r.json().then(function(err){return setFormErrors(err.errors);});}});}return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"power_id\",children:\"Power:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"power_id\",name:\"power_id\",value:powerId,onChange:function onChange(e){return setPowerId(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a power\"}),powers.map(function(power){return/*#__PURE__*/_jsx(\"option\",{value:power.id,children:power.name},power.id);})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"hero_id\",children:\"Hero:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"hero_id\",name:\"hero_id\",value:heroId,onChange:function onChange(e){return setHeroId(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a hero\"}),heroes.map(function(hero){return/*#__PURE__*/_jsx(\"option\",{value:hero.id,children:hero.name},hero.id);})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"strength\",children:\"Strength:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"strength\",name:\"strength\",value:strength,onChange:function onChange(e){return setStrength(e.target.value);}}),formErrors.length>0?formErrors.map(function(err){return/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:err},err);}):null,/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add Hero Power\"})]});}export default HeroPowerForm;","map":{"version":3,"sources":["/home/lee/Dev/school/python-code-challenge-superheroes/client/src/components/HeroPowerForm.js"],"names":["useEffect","useState","useHistory","HeroPowerForm","heroes","setHeroes","powers","setPowers","heroId","setHeroId","powerId","setPowerId","strength","setStrength","formErrors","setFormErrors","history","fetch","then","r","json","handleSubmit","e","preventDefault","formData","hero_id","power_id","method","headers","body","JSON","stringify","ok","push","err","errors","target","value","map","power","id","name","hero","length","color"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction HeroPowerForm() {\n  const [heroes, setHeroes] = useState([]);\n  const [powers, setPowers] = useState([]);\n  const [heroId, setHeroId] = useState(\"\");\n  const [powerId, setPowerId] = useState(\"\");\n  const [strength, setStrength] = useState(\"\");\n  const [formErrors, setFormErrors] = useState([]);\n  const history = useHistory();\n\n  useEffect(() => {\n    fetch(\"/heroes\")\n      .then((r) => r.json())\n      .then(setHeroes);\n  }, []);\n\n  useEffect(() => {\n    fetch(\"/powers\")\n      .then((r) => r.json())\n      .then(setPowers);\n  }, []);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    const formData = {\n      hero_id: heroId,\n      power_id: powerId,\n      strength,\n    };\n    fetch(\"/hero_powers\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(formData),\n    }).then((r) => {\n      if (r.ok) {\n        history.push(`/heroes/${heroId}`);\n      } else {\n        r.json().then((err) => setFormErrors(err.errors));\n      }\n    });\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <label htmlFor=\"power_id\">Power:</label>\n      <select\n        id=\"power_id\"\n        name=\"power_id\"\n        value={powerId}\n        onChange={(e) => setPowerId(e.target.value)}\n      >\n        <option value=\"\">Select a power</option>\n        {powers.map((power) => (\n          <option key={power.id} value={power.id}>\n            {power.name}\n          </option>\n        ))}\n      </select>\n      <label htmlFor=\"hero_id\">Hero:</label>\n      <select\n        id=\"hero_id\"\n        name=\"hero_id\"\n        value={heroId}\n        onChange={(e) => setHeroId(e.target.value)}\n      >\n        <option value=\"\">Select a hero</option>\n        {heroes.map((hero) => (\n          <option key={hero.id} value={hero.id}>\n            {hero.name}\n          </option>\n        ))}\n      </select>\n      <label htmlFor=\"strength\">Strength:</label>\n      <input\n        type=\"text\"\n        id=\"strength\"\n        name=\"strength\"\n        value={strength}\n        onChange={(e) => setStrength(e.target.value)}\n      />\n      {formErrors.length > 0\n        ? formErrors.map((err) => (\n            <p key={err} style={{ color: \"red\" }}>\n              {err}\n            </p>\n          ))\n        : null}\n      <button type=\"submit\">Add Hero Power</button>\n    </form>\n  );\n}\n\nexport default HeroPowerForm;\n"]},"metadata":{},"sourceType":"module"}