{"ast":null,"code":"import _slicedToArray from\"/home/lee/Dev/school/python-code-challenge-superheroes/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import{useParams,useHistory}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PowerEditForm(){var _useState=useState({data:null,errors:[],status:\"pending\"}),_useState2=_slicedToArray(_useState,2),_useState2$=_useState2[0],power=_useState2$.data,errors=_useState2$.errors,status=_useState2$.status,setPower=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var history=useHistory();var _useParams=useParams(),id=_useParams.id;useEffect(function(){fetch(\"/powers/\".concat(id)).then(function(r){if(r.ok){r.json().then(function(power){setPower({data:power,errors:[],status:\"resolved\"});setDescription(power.description);});}else{r.json().then(function(err){return setPower({data:null,errors:[err.error],status:\"rejected\"});});}});},[id]);if(status===\"pending\")return/*#__PURE__*/_jsx(\"h1\",{children:\"Loading...\"});function handleSubmit(e){e.preventDefault();fetch(\"/powers/\".concat(power.id),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({description:description})}).then(function(r){if(r.ok){history.push(\"/powers/\".concat(power.id));}else{r.json().then(function(err){return setPower({data:power,errors:err.errors,status:\"rejected\"});});}});}return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Editing \",power.name]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description:\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",name:\"description\",rows:\"4\",value:description,onChange:function onChange(e){return setDescription(e.target.value);}}),errors.length>0?errors.map(function(err){return/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:err},err);}):null,/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Update Power\"})]});}export default PowerEditForm;","map":{"version":3,"sources":["/home/lee/Dev/school/python-code-challenge-superheroes/client/src/components/PowerEditForm.js"],"names":["useEffect","useState","useParams","useHistory","PowerEditForm","data","errors","status","power","setPower","description","setDescription","history","id","fetch","then","r","ok","json","err","error","handleSubmit","e","preventDefault","method","headers","body","JSON","stringify","push","name","target","value","length","map","color"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useParams, useHistory } from \"react-router\";\n\nfunction PowerEditForm() {\n  const [{ data: power, errors, status }, setPower] = useState({\n    data: null,\n    errors: [],\n    status: \"pending\",\n  });\n  const [description, setDescription] = useState(\"\");\n  const history = useHistory();\n  const { id } = useParams();\n\n  useEffect(() => {\n    fetch(`/powers/${id}`).then((r) => {\n      if (r.ok) {\n        r.json().then((power) => {\n          setPower({ data: power, errors: [], status: \"resolved\" });\n          setDescription(power.description);\n        });\n      } else {\n        r.json().then((err) =>\n          setPower({ data: null, errors: [err.error], status: \"rejected\" })\n        );\n      }\n    });\n  }, [id]);\n\n  if (status === \"pending\") return <h1>Loading...</h1>;\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetch(`/powers/${power.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        description,\n      }),\n    }).then((r) => {\n      if (r.ok) {\n        history.push(`/powers/${power.id}`);\n      } else {\n        r.json().then((err) =>\n          setPower({ data: power, errors: err.errors, status: \"rejected\" })\n        );\n      }\n    });\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <h2>Editing {power.name}</h2>\n      <label htmlFor=\"description\">Description:</label>\n      <textarea\n        id=\"description\"\n        name=\"description\"\n        rows=\"4\"\n        value={description}\n        onChange={(e) => setDescription(e.target.value)}\n      />\n      {errors.length > 0\n        ? errors.map((err) => (\n            <p key={err} style={{ color: \"red\" }}>\n              {err}\n            </p>\n          ))\n        : null}\n      <button type=\"submit\">Update Power</button>\n    </form>\n  );\n}\n\nexport default PowerEditForm;\n"]},"metadata":{},"sourceType":"module"}