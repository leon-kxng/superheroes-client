{"ast":null,"code":"var _jsxFileName = \"/home/lee/Dev/school/python-code-challenge-superheroes/client/src/components/PowerEditForm.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useParams, useHistory } from \"react-router\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PowerEditForm() {\n  _s();\n\n  const [{\n    data: power,\n    errors,\n    status\n  }, setPower] = useState({\n    data: null,\n    errors: [],\n    status: \"pending\"\n  });\n  const [description, setDescription] = useState(\"\");\n  const history = useHistory();\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    fetch(`/powers/${id}`).then(r => {\n      if (r.ok) {\n        r.json().then(power => {\n          setPower({\n            data: power,\n            errors: [],\n            status: \"resolved\"\n          });\n          setDescription(power.description);\n        });\n      } else {\n        r.json().then(err => setPower({\n          data: null,\n          errors: [err.error],\n          status: \"rejected\"\n        }));\n      }\n    });\n  }, [id]);\n  if (status === \"pending\") return /*#__PURE__*/_jsxDEV(\"h1\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 36\n  }, this);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetch(`/powers/${power.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        description\n      })\n    }).then(r => {\n      if (r.ok) {\n        history.push(`/powers/${power.id}`);\n      } else {\n        r.json().then(err => setPower({\n          data: power,\n          errors: err.errors,\n          status: \"rejected\"\n        }));\n      }\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Editing \", power.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"description\",\n      children: \"Description:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      id: \"description\",\n      name: \"description\",\n      rows: \"4\",\n      value: description,\n      onChange: e => setDescription(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), errors.length > 0 ? errors.map(err => /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      children: err\n    }, err, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this)) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      children: \"Update Power\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PowerEditForm, \"cMa1Dc+Ly4qGCeFGfV4X9ZikWBw=\", false, function () {\n  return [useHistory, useParams];\n});\n\n_c = PowerEditForm;\nexport default PowerEditForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"PowerEditForm\");","map":{"version":3,"sources":["/home/lee/Dev/school/python-code-challenge-superheroes/client/src/components/PowerEditForm.js"],"names":["useEffect","useState","useParams","useHistory","PowerEditForm","data","power","errors","status","setPower","description","setDescription","history","id","fetch","then","r","ok","json","err","error","handleSubmit","e","preventDefault","method","headers","body","JSON","stringify","push","name","target","value","length","map","color"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useParams, useHistory } from \"react-router\";\n\nfunction PowerEditForm() {\n  const [{ data: power, errors, status }, setPower] = useState({\n    data: null,\n    errors: [],\n    status: \"pending\",\n  });\n  const [description, setDescription] = useState(\"\");\n  const history = useHistory();\n  const { id } = useParams();\n\n  useEffect(() => {\n    fetch(`/powers/${id}`).then((r) => {\n      if (r.ok) {\n        r.json().then((power) => {\n          setPower({ data: power, errors: [], status: \"resolved\" });\n          setDescription(power.description);\n        });\n      } else {\n        r.json().then((err) =>\n          setPower({ data: null, errors: [err.error], status: \"rejected\" })\n        );\n      }\n    });\n  }, [id]);\n\n  if (status === \"pending\") return <h1>Loading...</h1>;\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetch(`/powers/${power.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        description,\n      }),\n    }).then((r) => {\n      if (r.ok) {\n        history.push(`/powers/${power.id}`);\n      } else {\n        r.json().then((err) =>\n          setPower({ data: power, errors: err.errors, status: \"rejected\" })\n        );\n      }\n    });\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <h2>Editing {power.name}</h2>\n      <label htmlFor=\"description\">Description:</label>\n      <textarea\n        id=\"description\"\n        name=\"description\"\n        rows=\"4\"\n        value={description}\n        onChange={(e) => setDescription(e.target.value)}\n      />\n      {errors.length > 0\n        ? errors.map((err) => (\n            <p key={err} style={{ color: \"red\" }}>\n              {err}\n            </p>\n          ))\n        : null}\n      <button type=\"submit\">Update Power</button>\n    </form>\n  );\n}\n\nexport default PowerEditForm;\n"]},"metadata":{},"sourceType":"module"}